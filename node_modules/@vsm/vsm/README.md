# VSM JS

VSM JS는 TMAP의 데이터를 브라우저 상에서 해석하여 표현할 수 있도록 제작된 js 지도 엔진입니다.    
TMAP 사양을 가지고 동작하며 WebGL을 사용하여 렌더링 합니다.

* JavaScript library for VSM
* ES6 + TypeScript
* Using WebGL
* Released with npm

#### Online examples
https://vsm-tile.tmapmp.com/vsmjs/example/

#### npm registry (private)
https://nexus.tmapmp.com/repository/npm-private/


## 🔰 Getting Started

아래와 같이 `.npmrc`파일을 설정하세요.
```bash
registry=https://registry.npmjs.org/
@vsm:registry=https://nexus.tmapmp.com/repository/npm-private/
```

dependency를 설치하세요.
```bash
$ npm install @vsm/vsm
```

지도를 초기화 하세요.
```html
<div id="map" style='width: 400px; height: 300px;'></div>
<script>
const map = new Vsm.Map({
    container: 'map',
    config: 'https://farm41.ids.onestore.co.kr/hub/vsm/config/application/S001/TMAP_JS.conf',
    center: [126.9785, 37.5667],
    zoom: 16
});
</script>
```

예제와 ts interface 문서를 참고하여 개발을 시작하세요.
* 예제 - https://vsm-tile.tmapmp.com/vsmjs/example/
* index.d.ts - https://bitbucket.org/tmobi/vsm-js/src/develop/index.d.ts

#### Sub projects repo
> 아래 앱들은 예제 페이지에서 바로 접근 가능합니다.

* [react-vsm-js](https://bitbucket.org/tmobi/react-vsm-js/src/develop/): react wrapper
* [vsm-debugger](https://bitbucket.org/tmobi/vsm-debugger/src/develop/): vsm의 화면을 상세히 볼수 있는 앱
* [vsm-simple-editor](https://bitbucket.org/tmobi/vsm-simple-editor/src/develop/): 스타일 스펙을 간단히 수정해볼수 있는 앱
* [VSMSTUDIO](https://bitbucket.org/tmobi/workspace/projects/VSMSTUDIO): 스타일 스펙 admin


### ⚠️ Caution
* 신규 도입 / 업데이트시 반드시 최신버전(^1.1.0)으로 적용해야 합니다.
* 

## 개발설정
위와 같이 `.npmrc` 설정 후

```bash
$ npm install
$ npm start
// open http://localhost:8082/example/
```

#### Troubleshooting on macOS Monterey
* install 시 node-gyp등에서 python 버전 에러가 일어나는 경우    
> Since macOS Monterey, no longer has python2 installed, npm fails to install node-gyp. You need to manually install the python 2.7.    
=> [pyenv](https://github.com/pyenv/pyenv) 사용하여 해결    
    ```bash
    $ brew install pyenv
    $ pyenv install 2.7.18
    $ pyenv global 2.7.18
    $ echo "export PATH=\"\${HOME}/.pyenv/shims:\${PATH}\"" >> ~/.zshrc
    ```
    